<div id="waitinglist" style="display:none">
  <div class="mailchimp-form">
    <a class="closebox" onclick="$.fancybox.close()"> &times;</a>
    <div class="k-logo"><img src="{{ 'kw.png' | asset_url }}" /></div>
    	<p class="heading-text">Enter your email to be notified once this item is back in stock.<br />
          please advise size if APPLICABLE.</p>
      <div class="clear waitingform">
        <form method="post" action="https://knowlita.us6.list-manage.com/subscribe/post-json?u=11dc9e1acab61ce95a8f5abd3&amp;id=e989afa2b5&c=?" class="submit-waiting" name="mc-embedded-subscribe-form" >
       
        <input type="email" id="contactFormEmail" name="MERGE0" placeholder="EMAIL" class="clear" onfocus="this.placeholder=''" onblur="this.placeholder='EMAIL'" />
        <input type="text" id="contactPName" name="MERGE1" placeholder="PRODUCT NAME" onfocus="this.placeholder=''" onblur="this.placeholder='PRODUCT NAME'"  class="clear" />
        <input type="text" id="contactSize" name="MERGE2" placeholder="SIZE" class="clear" onfocus="this.placeholder=''" onblur="this.placeholder='SIZE'"  />
        
        <div id="" class="modify_loader">
          <div class="bar"></div>
          <div class="bar"></div>
          <div class="bar"></div>
          <div class="bar"></div>
          <div class="bar"></div>
        </div>

        <input type="submit" id="contactFormSubmit" value="SUBMIT" class="clear" />
        </form>
      </div>   
    <p class="logotext"> </p>
  </div>
</div>
<script>
  $(document).ready(function(e){
    $('.fancyboxs').fancybox({
     
      padding:0,
      closeBtn: false
    });
    
    $('#contactPName').val('{{product.title}}');
    
    $('.waitingform .submit-waiting').submit(function(s){
      s.preventDefault();
      
      var fn = $('#contactPName');
      var ye = $('#contactFormEmail');

      if (ye.val().trim() == null || ye.val().trim() == "") {
        ye.css('border-color','#ff5a5f');
        return false;
      }
      else {
        ye.css('border-color','#fff');
      }

      if (fn.val().trim() == null || fn.val().trim() == "" ) {
        fn.css('border-color','#ff5a5f');
        return false;
      }
      else {
        fn.css('border-color','#fff');
      }
      
      $('.modify_loader').show();
      $('.modify_loader').addClass('loading');
    
      $.ajax({
        type: 'POST',
        url: $(this).attr('action'),
        dataType: 'json',
        data: $(this).serialize(),
        error: function(err){
        	console.log(err);
        },
        success: function(){
          $('.waitingform .submit-waiting').fadeOut("slow", function(){
            $('#waitinglist').css('background','#fff');
            $('.closebox').css('color','#000');
            $('.heading-text').hide();
            $('.k-logo img').attr('src','{{ 'kb.png' | asset_url }}' );
			$('.logotext').css('color','#000');
            $('.waitingform').append("<p class='succss-msg'>Thanks.<br />we'll let you know as soon as it's available again.</p>");
          });
          $('#modify_loader').removeClass('loading');
        }
        
      });
    
    });
  });
</script>
<style>
  #waitinglist {
    background: #000 none repeat scroll 0 0;
    padding: 15px;
    text-align: center;
    max-width:450px;
    position:relative;
  }
  .clear {
    clear:both;
  }
  .k-logo {
    margin-top: 30px;
  }
  .k-logo img {
    height: 45px;
    width: 50px;
  }
  .waitingform input {
    font-family: "bebas_neuebook";
    font-size: 16px;
    line-height: 23px;
    margin: 7px 0;
    padding: 5px 0;
    text-align: center;
    width: 250px;
  }
  .waitingform input[type="submit"] {
    background: #fff none repeat scroll 0 0;
    color: #000;
    font-weight:normal;
  }
  .mailchimp-form p.logotext {
    color: #fff;
    font-family: HeroicReg;
    font-size: 2.4em;
    letter-spacing: 0.01em;
    margin: 30px 0 10px;
    text-transform: uppercase;
  }
  .heading-text {
    color: #fff;
    font-size: 18px;
    margin: 30px 0;
  }

  a.closebox {
    color: #fff;
    font-size: 50px;
    position: absolute;
    right: 7px;
    top: 7px;
    cursor:pointer;
  }
  .succss-msg {
    text-align:center;
    color:#000;
    font-size:20px;
    margin:100px 0;
  }
  .clear.waitingform::after {
    content: " ";
    display: block;
    overflow: hidden;
  }
  .modify_loader {
    align-items: center;
    display:none;
    height: 25px;
    justify-content: center;
    margin: -5px auto;
    width: 30px;
  }
  
  .bar {
    background: #ffffff none repeat scroll 0 0;
  }
  .loading .bar {
    border-radius: 5px;
    display: inline-block;
    flex: 1 1 5px;
    height: 5px;
    margin-left: -4px;
    margin-right: 1px;
    vertical-align: middle;
    width: 5px;
  }
  .loading .bar:nth-child(1) {
    animation: modify_load 0.3s ease-in-out 0.1s alternate none infinite running;
    -webkit-animation: modify_load 0.3s ease-in-out 0.1s alternate none infinite running;
    -o-animation: modify_load 0.3s ease-in-out 0.1s alternate none infinite running;
  }
  .loading .bar:nth-child(2) {
    animation: modify_load 0.3s ease-in-out 0.2s alternate none infinite running;
    -webkit-animation: modify_load 0.3s ease-in-out 0.2s alternate none infinite running;
    -o-animation: modify_load 0.3s ease-in-out 0.2s alternate none infinite running;
  }
  .loading .bar:nth-child(3) {
    animation: modify_load 0.3s ease-in-out 0.3s alternate none infinite running;
    -webkit-animation: modify_load 0.3s ease-in-out 0.3s alternate none infinite running;
    -o-animation: modify_load 0.3s ease-in-out 0.3s alternate none infinite running;
  }
  .loading .bar:nth-child(4) {
    animation: modify_load 0.3s ease-in-out 0.4s alternate none infinite running;
    -webkit-animation: modify_load 0.3s ease-in-out 0.4s alternate none infinite running;
    -o-animation: modify_load 0.3s ease-in-out 0.4s alternate none infinite running;
  }
  .loading .bar:nth-child(4) {
    animation: modify_load 0.3s ease-in-out 0.4s alternate none infinite running;
    -webkit-animation: modify_load 0.3s ease-in-out 0.4s alternate none infinite running;
    -o-animation: modify_load 0.3s ease-in-out 0.4s alternate none infinite running;
  }
</style>